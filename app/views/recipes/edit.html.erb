<% if Recipe.pending(current_user) == @recipe %>
<h1>Receta actual</h1>
<% else %>
<h1>Receta "<%= @recipe.name %>"</h1>
<% end %>

<%= form_with(model: @recipe, method: :put, local: true) do |form| %>
<table>
  <thead>
    <th>Ingrediente o preparación</th>
    <th>Medida casera</th>
    <th>Porción cantidad</th>
    <th>GR/ML</th>
    <th>Calorias</th>
    <th>Proteinas</th>
    <th>H de C g</th>
    <th>Lípido</th>
    <th>Ac. grasos saturados g.</th>
    <th>Ac. grasos Monoinsat g.</th>
    <th>Ac. grasos Poliinsat g.</th>
  </thead>
  <tbody>
  <% @recipe.compounds.each do |compound| %>
    <tr>
      <td><%= compound.food.name %></td>
      <td><%= compound.food.homemade_portion %></td>
      <td><%= form.number_field "compound[#{compound.id}][portions]", value: compound.portions %></td>
      <td><%= form.number_field "compound[#{compound.id}][grams]", value: compound.grams %></td>
      <td><%= compound.food.calories %></td>
      <td><%= compound.food.proteins_g %></td>
      <td><%= compound.food.carbohydrates_g %></td>
      <td><%= compound.food.lipids %></td>
      <td><%= compound.food.saturated_fatty_acids_g %></td>
      <td><%= compound.food.monounsaturated_fatty_acids_g %></td>
      <td><%= compound.food.polyunsaturated_fatty_acids_g %></td>
    </tr>
  <% end %>
  </tbody>
</table>
<br>
<%= form.submit 'Crear receta' %>
<%= link_to 'Eliminar receta', recipe_path(@recipe), method: :delete %>
<% end %>
<br>
<%= link_to 'Back', recipes_path %>
